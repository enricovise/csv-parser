<!DOCTYPE html>
<html>
  <header>
	<title>Parser</title>
	<meta charset="UTF-8" />
	<style>
	  pre {
	    padding: 1em;
	    background: #EBF4FA;
	  }

      #token:before {
        color: blue;
        content: "[";
      }

      #token:after {
        color: red;
        content: "]";
      }
	</style>
	<script src="parser.js"></script>
  </header>
  <body>
	<h1>Test</h1>
	<section>
      Please, select your CSV file.
	  <input type="file" id="files" name="files[]" />
	</section>
	<section>
	  <pre id="text">None.</pre>
	  <form>
		Next, specify row <input type="text" id="row" />,
		column <input type="text" id="column" /> and
        separator <input type="text" id="separator" />.<br />
		Then <input type="button" value="get" onclick="GetValue();" /> your token.
	  </form>
	</section>
	<section>
      <pre id="token">None.</pre>
	</section>

	<script>
	  if (!(window.File && window.FileReader && window.FileList && window.Blob))
	  {
	    document.getElementById('text').innerHTML =
	                  'The File APIs are not fully supported in this browser.';
	    document.getElementById('files').disabled = true;
	  }
	  else
	  {
	    document.getElementById('files').disabled = false;
	    function handleFileSelect(event)
	    {
          var reader = new FileReader();
          reader.onload = function(e)
          {
            document.getElementById('text').innerHTML = e.target.result;
          };
          reader.readAsText(event.target.files[0]);
	    }

	    document.getElementById('files').addEventListener('change',
	                                                  handleFileSelect, false);
	  }

	  function GetValue()
	  {
	    var parser = new CSVParser(
                                   document.getElementById("text").innerHTML,
                                   document.getElementById("separator").value);
        parser.gotoRow(document.getElementById("row").value);
        parser.row.gotoToken(document.getElementById("column").value);
        document.getElementById('token').innerHTML = parser.row.token.asString();
	  }
	</script>
  </body>
</html>
